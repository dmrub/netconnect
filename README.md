# netconnect
netconnect is a docker container for creating reverse proxy to HTTP services
over SSH forwarding. It is useful when your servers are not available in the
local network but can be forwarded via SSH gateway host.

## Functionality

netconnect combines sshd server with nginx and controller program written in Python. Controller configures nginx proxy to forward incoming requests over ssh tunnels to
the HTTP services running outside of the network.

## Configuration
### Available Environment Variables

 - **NC_NGINX_PORT**: Port of the nginx reverse proxy, it must be accessible in the local network. Defaults to 8080.
 - **NC_SSHD_PORT**: Port of the sshd server, it must be accessible in the local network. Defaults to 22.
 - **NC_CONTROLLER_PORT**: Port of the controller server. Defaults to 9090.
 - **NC_ROOT_PASSWORD**: The password of the root user. Set it only for debug purposes. When set to empty string password authentication for root is disabled.
 - **NC_ROOT_AUTHORIZED_KEYS**: Public keys for root user delimited by newline. Can be generated by ssh-keygen.
 - **NC_USER** The name of the login user. Defaults to nc.
 - **NC_USERID** The numeric ID of the login user. Defaults to 1001.
 - **NC_GROUP** The primary group of the login user. Defaults to nc.
 - **NC_GROUPID** The numeric ID of the primary group of the login user. Defaults to 1001.
 - **NC_PASSWORD** The password of the login user. If set to empty string password authentication for login user is disabled. Defaults to empty string.
 - **NC_AUTHORIZED_KEYS**: Public keys for login user delimited by newline. Can be generated by ssh-keygen.
 - **NC_HOME** The home directory of the login user. Defaults to /home/nc.
 - **NC_RUN** Commands to run with '/bin/sh -c'. Defaults to empty string.
 - **NC_ALLOW_TCP_FORWARDING** Sets AllowTcpForwarding SSHD option for the login user. Defaults to remote.

## References

 * https://linux.die.net/man/5/sshd_config
